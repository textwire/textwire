package evaluator

import "testing"

func TestEvalIntFunctions(t *testing.T) {
	cases := []struct {
		id     int
		inp    string
		expect string
	}{
		// float
		{10, `{{ 1.float() }}`, "1.0"},
		{20, `{{ 321.float().int() }}`, "321"},
		// abs
		{30, `{{ 1.abs() }}`, "1"},
		{40, `{{ -1.abs() }}`, "-1"},
		{50, `{{ (-1).abs() }}`, "1"},
		{60, `{{ 0.abs() }}`, "0"},
		{70, `{{ -999999.abs() }}`, "-999999"},
		{80, `{{ 999999.abs() }}`, "999999"},
		// str
		{90, `{{ 1.str() }}`, "1"},
		{100, `{{ 321.str() }}`, "321"},
		{110, `{{ (-1).str() }}`, "-1"},
		{120, `{{ (-9999999999).str() }}`, "-9999999999"},
		{130, `{{ 9999999999.str() }}`, "9999999999"},
		// len
		{140, `{{ 1.len() }}`, "1"},
		{150, `{{ 321.len() }}`, "3"},
		{160, `{{ -1.len() }}`, "-1"},
		{170, `{{ 0.len() }}`, "1"},
		{180, `{{ -9999999999.len() }}`, "-10"},
		{190, `{{ (-9999999999).len() }}`, "10"},
		{200, `{{ 9999999999.len() }}`, "10"},
		// decimal
		{210, `{{ 0.decimal() }}`, "0.00"},
		{220, `{{ 100.decimal() }}`, "100.00"},
		{230, `{{ 2352.decimal() }}`, "2352.00"},
		{240, `{{ 1000.decimal('_') }}`, "1000_00"},
		{250, `{{ 9000.decimal('_', 10) }}`, "9000_0000000000"},
		{260, `{{ 100.decimal('|', 0) }}`, "100"},
		{270, `{{ 100.decimal('|', 1) }}`, "100|0"},
		{280, `{{ (-100).decimal('|', 0) }}`, "-100"},
		{290, `{{ 1.decimal(',') }}`, "1,00"},
	}

	for _, tc := range cases {
		evaluationExpected(t, tc.inp, tc.expect, tc.id)
	}
}
